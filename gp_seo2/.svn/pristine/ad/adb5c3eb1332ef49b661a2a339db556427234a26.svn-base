<?php
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
/* @var $this AppCodeController */
/* @var $model AppCode */
?>
<div class="item_image float">
    <?php echo CHtml::image($model->getAttribute('app_icon'), 'app icon', array('class' => 'app_icon')); ?>
</div>
<div class="item_app float">
    <ul>
        <li>
            <?php echo CHtml::link($model->getAttribute('app_name'), array('appCode/competeKeyword', 'id' => $model->app_id)) ?>
        </li>
        <li>
            <?php echo CHtml::link($model->getAttribute('artist_name'), $model->getAttribute('artist_url'), array('target' => 'blank')) ?>
        </li>
        <li>
            <div class="rating" id="10_4">
                <?php
                $app = $model->apps[0];
                $star = $app->rating;
                $star = floatval($star);
                $full = intval($star);
                $half = $star - $full;
                if ($half >= 0.8) {
                    $full += 1;
                    $half = 0;
                } elseif ($half > 0.3 && $half < 0.8) {
                    $half = 1;
                }
                $blank = 5 - $full - $half;
                for ($i = 0; $i < $full; $i++) {
                    echo "<img src='css/images/star_full.png' />";
                }
                if ($half)
                    echo "<img src='css/images/star_half.png' />";

                for ($i = 0; $i < $blank; $i++) {
                    echo "<img src='css/images/star_blank.png' />";
                }
                ?>
                <p class="rating"><?php echo CHtml::encode($app->rating) ?></p>
                <p class="rating_count">(<?php echo CHtml::encode($app->rating_count); ?>)</p>

            </div>
        </li>
    </ul>
</div>
<div class="item_info float">
    <ul>
        <li><?php echo CHtml::encode($model->getAttributeLabel('price')); ?>
            <?php echo CHtml::encode($model->getAttribute('price')) ?>
        </li>
        <li><?php echo CHtml::encode($model->getAttributeLabel('current_version')) ?>
            <?php echo CHtml::encode($model->getAttribute('current_version')) ?>
        </li>
        <li><?php echo CHtml::encode($model->getAttributeLabel('version_update_date')) ?>
            <?php echo CHtml::encode($model->getAttribute('vesion_update_date')) ?>
        </li>
        <li><?php echo CHtml::encode($model->categoryCode->getAttribute('category_name')) ?></li>
    </ul>
</div>
<div class="summary float">
    <div class="label description">Description</div>
    <div class="info float">
        <p>
            <?php echo CHtml::encode($model->getAttribute('summary')) ?>
        </p>
    </div>
</div>